{
  //Externally defined parameters - Variable
  // float click_start() { return TileEntity.clickStart; }
  // float click_end() { return TileEntity.clickEnd; }

  "parameters": {
    "fps": 30,
    "starting_length": 10,
    "walk_length": 10,
    "stopping_length": 10,

    "click_start_frames": [ "compose", [ "*", "#fps" ], "#click_start" ],
    "since_click_start": [ "-*", "#click_start", "#fps" ],
    "since_click_end": [ "-*", "#click_end", "#fps" ],
    "next_cycle_end": [ "compose", [ "-*R+", "#click_start", "#fps", "#walk_length", "#click_start_frames"], "#click_end" ],

    "starting_time": [ "compose", [ "m/", "#starting_length", "#fps" ], "#since_click_start" ],
    "walk_time":     [ "compose", [ "-f+/", "#starting_length", "#walk_length", "#starting_length", "#fps" ], "#since_click_start" ],
    "stopping_time": [ "*-m++/", "#fps", "#next_cycle_end", "#stopping_length", "#starting_length", "#walk_length", "#fps" ],

    "end_starting_clip": [ "compose", [ "-", "#starting_length" ], "#since_click_start" ],
    "end_walk_clip": [ "*-", "#fps", "#next_cycle_end" ],
    "end_stopping_clip": [ "*--", "#fps", "#next_cycle_end", "#stopping_length" ]
  },
  "clips": {
    "model": "examplemod:block/SSSteamSpider.ogex@main",
    "stopped": [ "apply", "#model", 0 ],
    "start_walking": [
      "trigger_positive",
      [ "apply", "#model", "#starting_time" ],
      "#end_starting_clip",
      "!transition:walk_loop"
    ],
    "walk_loop": [ "apply", "#model", "#walk_time"],
    "walk_loop_end": [
      "trigger_positive",
      "#walk_loop",
      "#end_walk_clip",
      "!transition:stop_walking"
    ],
    "stop_walking": [
      "trigger_positive",
      [ "apply", "#model", "#stopping_time" ],
      "#end_stopping_clip",
      "!transition:stopped"
    ]
  },

  "states": [
    "stopped",
    "start_walking",
    "walk_loop",
    "walk_loop_end",
    "stop_walking"
  ],
  "transitions": {
    "stopped": "start_walking",
    "start_walking": "walk_loop",
    "walk_loop": "walk_loop_end",
    "walk_loop_end": "stop_walking",
    "stop_walking": "stopped"
  },
  "start_state": "stopped"
}
